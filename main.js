!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}toggleButtonState(e){this._hasInvalidInput(e)?this._disableButton():this._enableButton()}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_showError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._disableButton(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t){let{data:s,handleImageClick:r}=e;this._title=s.title,this._url=s.url,this._cardSelector=t,this._handleImageClick=r}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",this._handleLikeButton.bind(this)),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({url:this._url,title:this._title})))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._element.remove(),this._element=null}getView(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image");return e.src=this._url,e.alt=this._title,this._element.querySelector(".card__title").textContent=this._title,this._element}}const s={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r={cardList:".cards__list",cardTemplate:"#card-template",cardPreviewImage:"#image-preview-modal",cardImage:".modal__card-image-preview",addCardModal:"#add-place-modal",cardForm:"#modal-form"};class o{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._closeByEscape)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._closeByEscape)}_closeByEscape=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal_opened"))&&this.close()}))}}class i extends o{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s}_getInputValues(){const e=this._form.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}close(){this._form.reset(),super.close()}}const n=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),{cardPreviewImage:a,addCardModal:c}=r,u=new class extends o{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__card-image-preview"),this._title=this._popupElement.querySelector(".modal__image-title")}open(e){this._title.textContent=e.title,this._image.src=e.url,this._image.alt=`Image ${e.url}`,super.open()}}(a),d=document.querySelector("#profile-name"),_=document.querySelector("#profile-description"),{profileTitle:m,profileDescription:p,profileEditModal:h}={profileTitle:".profile__title",profileDescription:".profile__description",cardTitle:".modal__input_type_title",cardUrl:".modal__input_type_url",profileEditModal:"#profile-edit-modal"},E=document.querySelector("#modal-form"),v=new e(s,document.querySelector("#profile-edit-form")),g=new e(s,E);v.enableValidation(),g.enableValidation();const S=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{userName:this._nameEl.textContent,userJob:this._jobEl.textContent}}setUserInfo(e){this._nameEl.textContent=e.title,this._jobEl.textContent=e.description}}({nameSelector:m,jobSelector:p});function b(e){return new t({data:e,handleImageClick:()=>{u.open(e)}},r.cardTemplate).getView()}const f=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{title:"Yosemite Valley",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{title:"Lake Louise",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{title:"Bald Mountains",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{title:"Latemar",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{title:"Vanoise National Park",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{title:"Lago di Braies",url:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=b(e);f.addItem(t)}},r.cardList);f.renderItems();const y=new i({popupSelector:h,handleFormSubmit:e=>{S.setUserInfo(e),y.close()}}),L=new i({popupSelector:c,handleFormSubmit:e=>{const t=b(e);f.addItem(t),L.close()}});u.setEventListeners(),y.setEventListeners(),L.setEventListeners(),n.addEventListener("click",(()=>{g.toggleButtonState(),L.open()})),l.addEventListener("click",(()=>{v.toggleButtonState();const e=S.getUserInfo();d.value=e.userName,_.value=e.userJob,y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBU0ssY0FDMUJkLEVBQWtCTixNQUFRd0IsRUFBU0gsU0FDbkNkLEVBQXdCUCxNQUFRd0IsRUFBU0YsUUFDekNrQixFQUFjMUQsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBGb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IEZvcm1FbGVtZW50O1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dEVsKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0Vycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2NvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IGNvbnRlbnQ7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUltYWdlQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX3VybCA9IGRhdGEudXJsO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKSk7XG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgdXJsOiB0aGlzLl91cmwsIHRpdGxlOiB0aGlzLl90aXRsZSB9KVxuICAgICAgKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8vIF9oYW5kbGVQcmV2aWV3SW1hZ2UoKSB7XG4gIC8vICAgb3BlblBvcHVwKGltYWdlUHJldmlld01vZGFsKTtcbiAgLy8gICBtb2RhbEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcbiAgLy8gICBtb2RhbEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcbiAgLy8gICBtb2RhbFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAvLyB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX3VybDtcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIHRpdGxlOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIHVybDogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJMYXRlbWFyXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIHVybDogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIHVybDogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgZm9ybVNldHRpbmdzID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY2FyZFNldHRpbmdzID0ge1xuICBjYXJkTGlzdDogXCIuY2FyZHNfX2xpc3RcIixcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIGNhcmRQcmV2aWV3SW1hZ2U6IFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIixcbiAgY2FyZEltYWdlOiBcIi5tb2RhbF9fY2FyZC1pbWFnZS1wcmV2aWV3XCIsXG4gIGFkZENhcmRNb2RhbDogXCIjYWRkLXBsYWNlLW1vZGFsXCIsXG4gIGNhcmRGb3JtOiBcIiNtb2RhbC1mb3JtXCIsXG59O1xuXG5leHBvcnQgY29uc3QgdXNlckluZm9TZXR0aW5ncyA9IHtcbiAgcHJvZmlsZVRpdGxlOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBwcm9maWxlRGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGNhcmRUaXRsZTogXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIixcbiAgY2FyZFVybDogXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCIsXG4gIHByb2ZpbGVFZGl0TW9kYWw6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9jbG9zZUJ5RXNjYXBlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2NhcGUpO1xuICB9XG5cbiAgX2Nsb3NlQnlFc2NhcGUgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dERhdGEgPSB7fTtcblxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXREYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXREYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG5cbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCIvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltcG9ydHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5cbmltcG9ydCB7XG4gIGNhcmRTZXR0aW5ncyxcbiAgZm9ybVNldHRpbmdzLFxuICBpbml0aWFsQ2FyZHMsXG4gIHVzZXJJbmZvU2V0dGluZ3MsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcblxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5jb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgeyBjYXJkUHJldmlld0ltYWdlLCBhZGRDYXJkTW9kYWwgfSA9IGNhcmRTZXR0aW5ncztcblxuY29uc3QgY2FyZEltYWdlUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShjYXJkUHJldmlld0ltYWdlKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHsgcHJvZmlsZVRpdGxlLCBwcm9maWxlRGVzY3JpcHRpb24sIHByb2ZpbGVFZGl0TW9kYWwgfSA9IHVzZXJJbmZvU2V0dGluZ3M7XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtZm9ybVwiKTtcblxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vICEgfHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbGFzc2VzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBwcm9maWxlRm9ybSk7XG5cbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGNhcmRGb3JtKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBwcm9maWxlVGl0bGUsXG4gIGpvYlNlbGVjdG9yOiBwcm9maWxlRGVzY3JpcHRpb24sXG59KTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogaXRlbSxcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgY2FyZEltYWdlUHJldmlldy5vcGVuKGl0ZW0pO1xuICAgICAgfSxcbiAgICB9LFxuICAgIGNhcmRTZXR0aW5ncy5jYXJkVGVtcGxhdGVcbiAgKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cblxuY29uc3QgY2FyZExheW91dCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG5cbiAgICAgIGNhcmRMYXlvdXQuYWRkSXRlbShjYXJkRWwpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRTZXR0aW5ncy5jYXJkTGlzdFxuKTtcbmNhcmRMYXlvdXQucmVuZGVySXRlbXMoKTtcblxuY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogcHJvZmlsZUVkaXRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHVzZXJEYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIHVzZXJJbmZvUG9wdXAuY2xvc2UoKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IGFkZENhcmRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgICBjYXJkTGF5b3V0LmFkZEl0ZW0oY2FyZCk7XG4gICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuY2FyZEltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VyTmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VySm9iO1xuICB1c2VySW5mb1BvcHVwLm9wZW4oKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19jYXJkLWltYWdlLXByZXZpZXdcIlxuICAgICk7XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IGRhdGEudGl0bGU7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS51cmw7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYEltYWdlICR7ZGF0YS51cmx9YDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZUVsLnRleHRDb250ZW50LFxuICAgICAgdXNlckpvYjogdGhpcy5fam9iRWwudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gdXNlckRhdGEudGl0bGU7XG4gICAgdGhpcy5fam9iRWwudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsIkZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2VuYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlZCIsIl9kaXNhYmxlQnV0dG9uIiwiYWRkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVsIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX3RpdGxlIiwidGl0bGUiLCJfdXJsIiwidXJsIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsImJpbmQiLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwidG9nZ2xlIiwiZ2V0VmlldyIsImltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsImZvcm1TZXR0aW5ncyIsImNhcmRTZXR0aW5ncyIsImNhcmRMaXN0IiwiY2FyZFRlbXBsYXRlIiwiY2FyZFByZXZpZXdJbWFnZSIsImNhcmRJbWFnZSIsImFkZENhcmRNb2RhbCIsImNhcmRGb3JtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfY2xvc2VCeUVzY2FwZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dERhdGEiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiYWRkQ2FyZEJ0biIsInByb2ZpbGVFZGl0QnRuIiwiY2FyZEltYWdlUHJldmlldyIsIl9pbWFnZSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlRWRpdE1vZGFsIiwiY2FyZFRpdGxlIiwiY2FyZFVybCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsIiwiX2pvYkVsIiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVDYXJkIiwiaXRlbSIsImNhcmRMYXlvdXQiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmRFbCIsInVzZXJJbmZvUG9wdXAiLCJuZXdDYXJkUG9wdXAiLCJjYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==